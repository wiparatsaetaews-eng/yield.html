<!DOCTYPE html>
<html lang="th">
<head>
<meta charset="UTF-8">
<title>Yield Calculator</title>

<style>
body {
  font-family: Arial, sans-serif;
  max-width: 420px;
  margin: auto;
  padding: 20px;
  background: #f9f9f9;
}

h2 {
  text-align: center;
}

label {
  font-weight: bold;
  margin-top: 10px;
  display: block;
}

input, select, button {
  width: 100%;
  padding: 8px;
  margin-top: 6px;
  box-sizing: border-box;
}

button {
  cursor: pointer;
  margin-top: 10px;
}

.result {
  margin-top: 15px;
  padding: 12px;
  border-radius: 6px;
  background: #eee;
}

.pass { background: #c8f7c5; }
.warn { background: #fff3b0; }
.fail { background: #f7c5c5; }
</style>
</head>

<body>

<h2>Yield Calculator</h2>

<label>เลือกหน่วย</label>
<select id="unit">
  <option value="1">กรัม (g)</option>
  <option value="1000">กิโลกรัม (kg)</option>
</select>

<label>น้ำหนักก่อนผสม / ก่อนลงขวด</label>
<input type="number" id="before" step="0.01" placeholder="เช่น 100">

<label>น้ำหนักหลังผสม / หลังลงขวด</label>
<input type="number" id="after" step="0.01" placeholder="เช่น 99.5">

<button onclick="calculateYield()">คำนวณ</button>
<button onclick="resetForm()">Reset</button>

<div id="result" class="result">
  <p>Yield: <b id="yieldValue">-</b></p>
  <p>Loss: <b id="lossValue">-</b></p>
  <p>สถานะ: <b id="statusValue">-</b></p>
</div>

<script>
function calculateYield() {
  const unit = Number(document.getElementById("unit").value);
  const before = Number(document.getElementById("before").value) * unit;
  const after = Number(document.getElementById("after").value) * unit;

  if (!before || !after || before <= 0 || after <= 0) {
    alert("กรุณากรอกน้ำหนักให้ถูกต้อง");
    return;
  }

  const yieldPercent = (after / before) * 100;
  const lossPercent = 100 - yieldPercent;

  document.getElementById("yieldValue").innerText =
    yieldPercent.toFixed(2) + " %";
  document.getElementById("lossValue").innerText =
    lossPercent.toFixed(2) + " %";

  const box = document.getElementById("result");
  const status = document.getElementById("statusValue");

  box.className = "result";

  if (yieldPercent > 100) {
    box.classList.add("warn");
    status.innerText = "น้ำหนักเพิ่ม (ตรวจสอบการชั่ง)";
  } else if (lossPercent <= 0.5) {
    box.classList.add("pass");
    status.innerText = "ผ่าน (Loss ≤ 0.5%)";
  } else if (lossPercent <= 2) {
    box.classList.add("warn");
    status.innerText = "เฝ้าระวัง (Loss 0.5–2%)";
  } else {
    box.classList.add("fail");
    status.innerText = "ไม่ผ่าน (Loss > 2%)";
  }
}

function resetForm() {
  document.getElementById("before").value = "";
  document.getElementById("after").value = "";
  document.getElementById("yieldValue").innerText = "-";
  document.getElementById("lossValue").innerText = "-";
  document.getElementById("statusValue").innerText = "-";
  document.getElementById("result").className = "result";
}
</script>

</body>
</html>
